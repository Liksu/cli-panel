/**
 * cli-panel - Command line interface for angular sites
 * @version v0.1.3
 * @link http://liksu.github.io/cli-panel/
 * @license MIT
 */
"use strict";function _typeof(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}window.cli=new function(){this.cache={commandInput:null,buffer:null,panel:null,show:!1},this.history=[],this.settings={prompt:"> "},this.workers={pre:[],commands:{},post:[],keys:{}},this.templates={},this.addHtml=function(t,e,n){this.templates[t]={html:e,selector:n||"body"}}.bind(this),document.addEventListener("DOMContentLoaded",function(){var t=this.templates,e={};Object.keys(t).forEach(function(n){var i=t[n].selector;e[i]||(e[i]=document.createElement("div"),e[i].innerHTML=""),e[i].innerHTML+=t[n].html}),Object.keys(e).forEach(function(t){document.querySelector(t).appendChild(e[t])}),this.cache.panel=document.querySelector(".cli .cli-panel"),this.cache.commandInput=this.cache.panel.querySelector(".cli .cli-line .cli-command"),this.cache.buffer=this.cache.panel.querySelector(".cli-buffer"),this.cache.prompt=this.cache.panel.querySelector(".cli-prompt"),this.cache.prompt.innerHTML=this.settings.prompt,this.toggle(this.cache.show)}.bind(this)),document.addEventListener("keydown",function(t){if(192===t.keyCode){if("INPUT"===t.target.nodeName&&t.target!==this.cache.commandInput)return;t.target===this.cache.commandInput&&t.preventDefault(),this.toggle()}else 13===t.keyCode&&t.target===this.cache.commandInput&&(cli.print(cli.cache.prompt.outerHTML+this.cache.commandInput.value),cli.run(this.cache.commandInput.value),this.cache.buffer.scrollTop=this.cache.buffer.scrollHeight,this.cache.commandInput.value="")}.bind(this)),this.show=function(){this.cache.panel.className+=" show",this.cache.show=!0,this.focus()}.bind(this),this.hide=function(){this.cache.panel.className=this.cache.panel.className.replace(/\s*show/g,""),this.cache.show=!1}.bind(this),this.toggle=function(t){void 0===t&&(t=!this.cache.show),t?this.show():this.hide()}.bind(this),this.mouseUp=function(){var t="";window.getSelection?t=window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&(t=document.selection.createRange().text),t||this.focus()}.bind(this),this.focus=function(){var t=this.cache.commandInput;setTimeout(function(){var e=t.value.length;if(t.setSelectionRange)t.setSelectionRange(e,e);else if("number"==typeof t.selectionStart)t.selectionStart=t.selectionEnd=e;else if("undefined"!=typeof t.createTextRange){t.focus();var n=t.createTextRange();n.collapse(!0),n.moveEnd(e),n.moveStart(e),n.select()}t.focus()},0)}.bind(this),this.print=function(t){this.cache.buffer.innerHTML+=t.replace(/\t/g,"    ")+"\n"}.bind(this),this.run=function(t){var e=this;this.history.push(t);var n={input:t,original:t,command:null,argv:{},result:null},i=new Promise(function(t,e){return t(n)});return this.workers.pre.forEach(function(t){return t.forEach(function(t){i=i.then(function(e){return t.worker(e)})})}),i=i.then(function(t){return new Promise(function(n,i){var o;return t.command&&(o=e.workers.commands[t.command])?n(o.worker(t)).then(function(e){return t=e||t}):n(t)})}),this.workers.post.forEach(function(t){return t.forEach(function(t){i=i.then(function(e){return t.worker(e)})})}),i}.bind(this);var t=function(t,e,n,i,o){o||(o=0),void 0===i&&"function"==typeof n&&(i=n,n=null);var c={name:e,description:n,worker:i};"command"===t||"keys"===t?this.workers.commands[e]=c:(this.workers[t][o]||(this.workers[t][o]=[]),this.workers[t][o].push(c))}.bind(this);this.command=t.bind(this,"command"),this.preprocessor=t.bind(this,"pre"),this.postprocessor=t.bind(this,"post")},function(t){}(window.cli),function(t){}(window.cli),function(t){t.command("clear","Clear screen",function(e){t.cache.buffer.innerHTML=""})}(window.cli),function(t){t.command("help","Display this list",function(e){t.print("List of available commands:"),Object.keys(t.workers.commands).sort().forEach(function(e){var n=t.workers.commands[e].description;t.print(["	",e,n?"- "+n:""].join(" "))})})}(window.cli),function(t){}(window.cli),function(t){}(window.cli),function(t){function e(t){var e={_:[]};if(!t)return e;var n=t.match(/^(.*?)\s+\-\-\s+(.*)$/);if(n&&(t=n[1],n=n[2]),!t)return e._=[n],e;for(var i=t.split(""),o=[],c=!1,s=!1,r=[],a=0;a<=i.length;a++)if("\\"!==i[a])if(c)c=!1;else{if('"'===i[a]||"'"===i[a]){if(!s){o.push(r.join("").trim()),r=[],s={"char":i[a],position:a,text:[]};continue}if(s["char"]===i[a]){s.text=s.text.join(""),o.push(s),s=!1;continue}}s?s.text.push(i[a]):r.push(i[a])}else c=!0;for(o.push(r.join("").trim()),o=o.map(function(t){return"string"==typeof t?t.split(/\s+|=/):t}),o=[].concat.apply([],o),o=o.map(function(t){if(/^\-([^-]+)$/.test(t))return{flags:RegExp.$1.split("")};if(/^\-\-(.+)$/.test(t)){var e=RegExp.$1;return e=e.split("-").map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}).join(""),e=e.charAt(0).toLowerCase()+e.slice(1),{param:e}}return t}),o=o.map(function(t){return t.text||t}),o.push(n);o.length;){var l=o.shift();if(l)if("object"!==("undefined"==typeof l?"undefined":_typeof(l)))e._.push(l);else{var h=l.param;if(l.flags)for(h=l.flags.pop();l.flags.length;)e[l.flags.shift()]=!0;if("string"==typeof o[0]){e[h]=o.shift(),!isNaN(parseFloat(e[h]))&&isFinite(e[h])&&(e[h]=+e[h]);var u={"true":!0,"false":!1,"null":null,undefined:void 0};u.hasOwnProperty(e[h])&&(e[h]=u[e[h]])}else e[h]=!0}}return e}t.preprocessor("argv","Split command line to arguments",function(n){if(!n.input)return n;n.command=null;var i=Object.keys(t.workers.commands).sort(function(t,e){return e.length-t.length});return i.some(function(t){return 0===n.input.indexOf(t)&&(n.command=t,n.input=n.input.replace(t,"").trim()),n.command}),n.command&&(n.argv=e(n.input),n.input=""),n})}(window.cli),function(t){t.addHtml("templates/panel.html",'<div class="cli"><div onmouseup="cli.mouseUp()" class="cli-panel show"><div class="cli-history"><span class="cli-buffer"></span><span class="cli-loader hide_element"></span></div><div class="cli-line"><span class="cli-prompt"></span><input type="text" autofocus="autofocus" class="cli-command"/></div></div></div>',"body")}(window.cli),!function(){var t=".cli {\n  max-height: 64%; }\n  .cli-panel {\n    height: 0;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    color: white;\n    font: 16px monospace;\n    background: rgba(0, 0, 0, 0.8);\n    line-height: 20px;\n    transition: height 0.64s linear; }\n  .cli-panel.show {\n    height: 64%; }\n  .cli-history {\n    overflow: auto;\n    white-space: pre-wrap;\n    position: absolute;\n    bottom: 20px; }\n    .cli-history .cli-prompt {\n      display: inline;\n      width: auto; }\n  .cli-line {\n    position: absolute;\n    bottom: 0;\n    height: 20px;\n    width: 100%;\n    display: table; }\n  .cli-prompt {\n    display: table-cell;\n    width: 1px; }\n  .cli-command {\n    background: none;\n    border: 0;\n    color: white;\n    outline: none;\n    font: 16px monospace;\n    padding-left: 12px;\n    width: 100%;\n    box-sizing: border-box;\n    display: table-cell; }\n  .cli .hide_element {\n    display: none; }\n",e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}();