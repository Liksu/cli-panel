/**
 * cli4ng - Command line interface for angular sites
 * @version v0.1.1
 * @link https://github.com/Liksu/ng-cli#readme
 * @license MIT
 */
window.cli=new function(){this.templates={},this.cache={commandInput:null,buffer:null,panel:null,show:!1},this.addHtml=function(n,e,t){this.templates[n]={html:e,selector:t||"body"}}.bind(this),document.addEventListener("DOMContentLoaded",function(){var n=this.templates,e={};Object.keys(n).forEach(function(t){var i=n[t].selector;e[i]||(e[i]=document.createElement("div"),e[i].innerHTML=""),e[i].innerHTML+=n[t].html}),Object.keys(e).forEach(function(n){document.querySelector(n).appendChild(e[n])}),this.cache.panel=document.querySelector(".cli .panel"),this.cache.commandInput=this.cache.panel.querySelector(".line .command"),this.cache.buffer=this.cache.panel.querySelector(".buffer")}.bind(this)),document.addEventListener("keydown",function(n){if(192===n.keyCode){if("INPUT"===n.target.nodeName&&n.target!==this.cache.commandInput)return;this.toggle()}else 13===n.keyCode&&n.target===this.cache.commandInput}.bind(this)),this.show=function(){this.cache.panel.className+=" show",this.cache.show=!0,this.focus()}.bind(this),this.hide=function(){this.cache.panel.className=this.cache.panel.className.replace(/\s*show/g,""),this.cache.show=!1}.bind(this),this.toggle=function(n){void 0===n&&(n=!this.cache.show),n?this.show():this.hide()}.bind(this),this.focus=function(){var n=this.cache.commandInput;setTimeout(function(){var e=n.value.length;if(n.setSelectionRange)n.setSelectionRange(e,e);else if("number"==typeof n.selectionStart)n.selectionStart=n.selectionEnd=e;else if("undefined"!=typeof n.createTextRange){n.focus();var t=n.createTextRange();t.collapse(!0),t.moveEnd(e),t.moveStart(e),t.select()}n.focus()},0)}.bind(this),this.command=function(){}},function(n){n.addHtml("templates/panel.html",'<div class="cli"><div onclick="focus()" class="panel show"><div class="history"><span class="buffer"></span><span class="loader hide_element"></span></div><div class="line"><span class="prompt"></span><input type="text" autofocus="autofocus" class="command"/></div></div></div>',"body")}(window.cli),!function(){var n=".cli {\n  max-height: 64%; }\n  .cli_panel {\n    height: 0;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    color: white;\n    font: 16px monospace;\n    background: rgba(0, 0, 0, 0.8);\n    line-height: 20px;\n    transition: height 2.5s linear; }\n  .cli_panel.show {\n    height: 64%; }\n  .cli_history {\n    overflow: auto;\n    white-space: pre-line;\n    position: absolute;\n    bottom: 20px; }\n  .cli_line {\n    position: absolute;\n    bottom: 0;\n    height: 20px;\n    width: 100%; }\n  .cli_command {\n    background: none;\n    border: 0;\n    color: white;\n    outline: none;\n    font: 16px monospace;\n    padding-left: 20px;\n    width: 100%;\n    box-sizing: border-box;\n    margin-left: -20px; }\n  .cli_hide_element {\n    display: none; }\n",e=document.createElement("style");e.type="text/css",e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n)),(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(),angular.module("cli").run(function(n){n.command("clear","Clear screen",function(e){n.buffer="",n.print(null)})}),angular.module("cli").run(function(n){n.command("help","Display this list",function(e){n.print("List of available commands:"),Object.keys(n.workers.commands).sort().forEach(function(e){var t=n.workers.commands[e].description;n.print(["	",e,t?"- "+t:""].join(" "))})})}),angular.module("cli").run(function(n){angular.modules.filter(function(n){return"cli"!==n}).reduce(function(n,e){return n.concat(angular.module(e)._invokeQueue)},[]).filter(function(n){return"service"===n[1]}).map(function(n){return n[2][0]}).forEach(function(n){})}),angular.module("cli").run(function($cli){function calc(string){return eval(string)}$cli.postprocessor("calc","Calculate input",function(n){return n.input?($cli.print(calc(n.input)),n):n})}),angular.module("cli").run(function(n){n.preprocessor("argv","Split command line to arguments",function(e){if(!e.input)return e;var t=e.input.match(/^\w+/);return-1!==Object.keys(n.workers.commands).indexOf(t&&t[0])&&(e.command=t[0],e.input=e.input.replace(t[0],"")),e})});