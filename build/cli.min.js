/**
 * cli-panel - Command line interface for angular sites
 * @version v0.1.2
 * @link http://liksu.github.io/cli-panel/
 * @license MIT
 */
"use strict";window.cli=new function(){this.cache={commandInput:null,buffer:null,panel:null,show:!1},this.history=[],this.settings={prompt:"> "},this.workers={pre:[],commands:{},post:[],keys:{}},this.templates={},this.addHtml=function(e,t,n){this.templates[e]={html:t,selector:n||"body"}}.bind(this),document.addEventListener("DOMContentLoaded",function(){var e=this.templates,t={};Object.keys(e).forEach(function(n){var i=e[n].selector;t[i]||(t[i]=document.createElement("div"),t[i].innerHTML=""),t[i].innerHTML+=e[n].html}),Object.keys(t).forEach(function(e){document.querySelector(e).appendChild(t[e])}),this.cache.panel=document.querySelector(".cli .cli-panel"),this.cache.commandInput=this.cache.panel.querySelector(".cli .cli-line .cli-command"),this.cache.buffer=this.cache.panel.querySelector(".cli-buffer"),this.toggle(this.cache.show)}.bind(this)),document.addEventListener("keydown",function(e){if(192===e.keyCode){if("INPUT"===e.target.nodeName&&e.target!==this.cache.commandInput)return;e.target===this.cache.commandInput&&e.preventDefault(),this.toggle()}else 13===e.keyCode&&e.target===this.cache.commandInput}.bind(this)),this.show=function(){this.cache.panel.className+=" show",this.cache.show=!0,this.focus()}.bind(this),this.hide=function(){this.cache.panel.className=this.cache.panel.className.replace(/\s*show/g,""),this.cache.show=!1}.bind(this),this.toggle=function(e){void 0===e&&(e=!this.cache.show),e?this.show():this.hide()}.bind(this),this.focus=function(){var e=this.cache.commandInput;setTimeout(function(){var t=e.value.length;if(e.setSelectionRange)e.setSelectionRange(t,t);else if("number"==typeof e.selectionStart)e.selectionStart=e.selectionEnd=t;else if("undefined"!=typeof e.createTextRange){e.focus();var n=e.createTextRange();n.collapse(!0),n.moveEnd(t),n.moveStart(t),n.select()}e.focus()},0)}.bind(this),this.print=function(e){this.cache.buffer.innerHTML+=e+"\n"}.bind(this),this.run=function(e){this.history.push(e);var t={input:e,original:e,command:null,argv:{},result:null};new Promise(function(e,n){return e(t)})}.bind(this);var e=function(e,t,n,i,s){s||(s=0),void 0===i&&"function"==typeof n&&(i=n,n=null);var o={name:t,description:n,worker:i};"command"===e||"keys"===e?this.workers.commands[t]=o:(this.workers[e][s]||(this.workers[e][s]=[]),this.workers[e][s].push(o))}.bind(this);this.command=e.bind(this,"command"),this.preprocessor=e.bind(this,"pre"),this.postprocessor=e.bind(this,"post")},function(e){e.addHtml("templates/panel.html",'<div class="cli"><div onclick="focus()" class="cli-panel show"><div class="cli-history"><span class="cli-buffer"></span><span class="cli-loader hide_element"></span></div><div class="cli-line"><span class="cli-prompt"></span><input type="text" autofocus="autofocus" class="cli-command"/></div></div></div>',"body")}(window.cli),!function(){var e=".cli {\n  max-height: 64%; }\n  .cli-panel {\n    height: 0;\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    color: white;\n    font: 16px monospace;\n    background: rgba(0, 0, 0, 0.8);\n    line-height: 20px;\n    transition: height 0.64s linear; }\n  .cli-panel.show {\n    height: 64%; }\n  .cli-history {\n    overflow: auto;\n    white-space: pre-line;\n    position: absolute;\n    bottom: 20px; }\n  .cli-line {\n    position: absolute;\n    bottom: 0;\n    height: 20px;\n    width: 100%; }\n  .cli-command {\n    background: none;\n    border: 0;\n    color: white;\n    outline: none;\n    font: 16px monospace;\n    padding-left: 20px;\n    width: 100%;\n    box-sizing: border-box;\n    margin-left: -20px; }\n  .cli .hide_element {\n    display: none; }\n",t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.head||document.getElementsByTagName("head")[0]).appendChild(t)}();